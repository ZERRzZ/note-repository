<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>drag</title>
  <style>
    #div01 {
      width: 100px;
      height: 100px;
      background-color: red;
      position: absolute;
    }

    #div02 {
      width: 100px;
      height: 100px;
      background-color: blue;
      position: absolute;
      left: 200px;
      top: 200px;
    }
  </style>
</head>

<body>
  aaaaaaaaaaaaaaaaaaaaa
  <div id="div01"></div>
  <div id="div02"></div>

  <script>
    var div01 = document.getElementById("div01");
    var div02 = document.getElementById("div02");
    var html = document.documentElement;

    function drag(el) {
      el.onmousedown = function (event) {
        // 计算鼠标在元素上偏移量, 鼠标在视口的位置 - 元素在视口的偏移量
        var mouseX = event.clientX - el.offsetLeft;
        var mouseY = event.clientY - el.offsetTop;

        // 在 onmousedown 中触发 nonmousemove 事件
        document.onmousemove = function (event) {
          event.preventDefault()

          // 改变元素定位偏移量
          el.style.left = event.clientX - mouseX + "px";
          el.style.top = event.clientY - mouseY + "px";
        };
      };
      // onmouseup 给 document 元素加上比较好 ???
      el.onmouseup = function () {
        // 当鼠标松开时关闭 onmousemove 事件
        document.onmousemove = null;
        // 一定注意 onmouseup 事件也得关闭
        console.log("mei guan o");
      };
    }

    drag(div01);
    drag(div02);
  </script>
</body>

</html>