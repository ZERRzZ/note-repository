# 下载与使用

- 独立使用 Sass 需要先安装 Sass gem , Windows 系统需要先安装 Ruby
- 独立使用 Sass 应该把 scss/sass 文件编译成 css 文件才能使用
- 在 webpack 中使用时会有专门的解释器将其转换为 css 文件

# 后缀名 sass 与 scss 

- Sass 有两种语法格式, 首先是 SCSS (Sassy CSS), 这种格式仅在 CSS3 语法的基础上进行拓展, 这种格式以 .scss 作为拓展名
- 另一种是最早的 Sass 语法格式, 被称为缩进格式 (Indented Sass), 它使用 “缩进” 代替 “花括号” 表示属性属于某个选择器，用 “换行” 代替 “分号” 分隔属性, 这种格式以 .sass 作为拓展名

# 注释

- Sass 支持标准的 CSS 多行注释 `/* */`，以及单行注释/静默注释 `//`，前者会被完整输出到编译后的 CSS 文件中，而后者则不会
- 将 ! 作为多行注释的第一个字符表示在压缩输出模式下保留这条注释并输出到 CSS 文件中，通常用于添加版权信息
- 插值语句也可写进多行注释中输出变量值

```scss
$version: "1.2.3";
/* This CSS is generated by My Snazzy Framework version #{$version}. */
/* This CSS is generated by My Snazzy Framework version 1.2.3. */
```

# CSS 功能扩展

## 嵌套规则

- Sass 允许将一套 CSS 样式嵌套进另一套样式中，内层的样式将它外层的选择器作为父选择器
- 嵌套功能避免了重复输入父选择器，而且令复杂的 CSS 结构更易于管理

## 父选择器

- 在嵌套 CSS 规则时，有时也需要直接使用嵌套外层的父选择器，用 `&` 表示父选择器
- 例如当给某个元素设定 hover 样式时，或者当 body 元素有某个 classname 时，可以用 & 代表嵌套规则外层的父选择器

```scss
a {
  font-weight: bold;
  text-decoration: none;
  &:hover { text-decoration: underline; } // a:hover
  body.firefox & { font-weight: normal; } // body.firefox a
}
```

# SassScript

## 变量 $

- SassScript 最普遍的用法就是变量，变量以美元符号开头，赋值方法与 CSS 属性的写法一样 `$width: 5px;`
- 变量支持块级作用域，嵌套规则内定义的变量只能在嵌套规则内使用（局部变量），不在嵌套规则内定义的变量则可在任何地方使用（全局变量）
- 将局部变量转换为全局变量可以添加 `!global` 声明
- 默认变量值：`!default` 如果这个变量被声明赋值了，那就用它声明的值，否则就用这个值

```scss
$color: red;
$color: blue !default; // 此时的 color 是 red
```

## 运算

- SassScript 支持数字的加减乘除、取整等运算 `(+, -, *, /, %)` 如果必要会在不同单位间转换值
- 关系运算 `<, >, <=, >=` 也可用于数字运算，相等运算 `==, !=` 可用于所有数据类型

## 除法运算

- `/` 在 CSS 中通常起到分隔数字的用途，SassScript 作为 CSS 语言的拓展当然也支持这个功能，同时也赋予了 / 除法运算的功能
- 以下三种情况 `/` 将被视为除法运算符号：如果值或值的一部分是变量或者函数的返回值, 如果值被圆括号包裹, 如果值是算数表达式的一部分

```scss
p {
  font: 10px/8px;             // Plain CSS, no division
  $width: 1000px;
  width: $width/2;            // Uses a variable, does division
  width: round(1.5)/2;        // Uses a function, does division
  height: (500px/2);          // Uses parentheses, does division
  margin-left: 5px + 8px/2px; // Uses +, does division
}
```

- 如果需要使用变量，同时又要确保 `/` 不做除法运算，只需要用 `#{}` 插值语句将变量包裹

```scss
p {
  $font-size: 12px;
  $line-height: 30px;
  font: #{$font-size}/#{$line-height};
}
```

## 插值语句 #{}

- 通过 `#{}` 插值语句可以在选择器或属性名中使用变量
- `#{}` 插值语句也可以在属性值中插入 SassScript，大多数情况下，这样可能还不如使用变量方便，但是使用 #{} 可以避免 Sass 运行运算表达式，直接编译 CSS

# @ 指令

## @import 

- css 有一个特别不常用的特性，即 `@import` 规则，它允许在一个 css 文件中导入其他 css 文件。然而后果是只有执行到 `@import` 时，浏览器才会去下载其他 css 文件，这导致页面加载起来特别慢
- sass 也有一个 `@import` 规则，不同的是 sass 的 `@import` 规则在生成 css 文件时就把相关文件导入进来, 这意味着所有相关的样式被归纳到了同一个 css 文件中，无需发起额外的下载请求
- 使用 sass 的 `@import` 规则并不需要指明被导入文件的全名。你可以省略 .sass 或 .scss 文件后缀
- 当通过 `@import` 把 sass 样式分散到多个文件时，你通常只想生成少数几个 css 文件。那些专门为 `@import` 命令而编写的 sass 文件，并不需要生成对应的独立 css 文件，这样的 sass 文件称为局部文件
- sass 局部文件的文件名以下划线开头, 当你 `@import` 一个局部文件时，还可以省略文件名开头的下划线

```scss
// @import 后紧跟一个路径
@import "foo.scss"
```

## 媒体查询 @media

- 允许其在嵌套规则中嵌套，编译时将被编译到文件的最外层，包含嵌套的父选择器

```scss
.sidebar {
  width: 300px;
  @media screen and (orientation: landscape) {
    width: 500px;
  }
}
// 编译后
.sidebar {
  width: 300px; }
  @media screen and (orientation: landscape) {
    .sidebar {
      width: 500px; } }
```

## @extend 继承

- `@extend` 将一个选择器下的所有样式继承给另一个选择器

```scss
.error {
  border: 1px #f00;
  background-color: #fdd;
}
.seriousError {
  @extend .error;
  border-width: 3px;
}
```

# 控制指令

- `@if` 当 `@if` 的表达式返回值不是 false 或者 null 时，条件成立，输出 {} 内的代码

```scss
p {
  @if 1 + 1 == 2 { border: 1px solid; } // 成功编译
  @if 5 < 3 { border: 2px dotted; } // false
  @if null  { border: 3px double; } // false
}
```

- `@if` 声明后面可以跟多个 `@else if` 声明，或者一个 `@else` 声明

```scss
$type: monster;
p {
  @if $type == ocean { color: blue; }
  @else if $type == matador { color: red; }
  @else if $type == monster { color: green; } // 编译
  @else { color: black; }
}
```

- `@for` `@each` `@while` 略

# 混合指令 Mixin

- 混合指令用于定义可重复使用的样式，避免了使用无语意的 class , 混合指令可以包含所有的 CSS 规则，绝大部分 Sass 规则，甚至通过参数功能引入变量，输出多样化的样式
- 定义: 在 `@mixin` 后添加名称与样式, 在 `@include` 指令引用混合样式，格式是在其后添加混合名称，以及需要的参数
- 没有生命提前的说法，需先定义混合指令，再使用

```scss
@mixin large-text { // 定义
  font-size: 20px;
  color: #ff0000;
}
.page-title { // 使用
  @include large-text;
  padding: 4px;
  margin-top: 10px;
}
```

- 参数用于给混合指令中的样式设定变量，并且赋值使用。在定义混合指令的时候，按照变量的格式，通过逗号分隔，将参数写进圆括号里
- 引用指令时，按照参数的顺序，再将所赋的值对应写进括号

```scss
@mixin sexy-border($color, $width) { // 定义参数，类似函数
  border: {
    color: $color;
    width: $width;
    style: dashed;
  }
}
p { @include sexy-border(blue, 1in); } // 传参并调用
```

# 输出格式

- Sass 提供了四种输出格式，可以通过 `:style option` 选项设定，或者在命令行中使用 `--style` 选项
- `:nested` Sass 默认的输出格式，能够清晰反映 CSS 与 HTML 的结构关系。选择器与属性等单独占用一行，缩进量与 Sass 文件中一致
- `:expanded` 像是手写的样式，选择器、属性等各占用一行，属性根据选择器缩进，而选择器不做任何缩进
- `:compact` 比起上面两种占用的空间更少，每条 CSS 规则只占一行，包含其下的所有属性。嵌套过的选择器在输出时没有空行，不嵌套的选择器会输出空白行作为分隔符
- `:compressed` 删除所有无意义的空格、空白行、以及注释，力求将文件体积压缩到最小，同时也会做出其他调整，比如会自动替换占用空间最小的颜色表达方式