# 语法与类型

## 基础

区分大小写，使用 `Unicode` 字符集。

指令被称之为语句，使用分号 `;` 分隔。

从左往右扫描源文本并将其转换为输入元素（token、控制字符、行终止符、注释和空白字符）序列。

## 注释

`//`

`/* */`

## 声明与变量

- `var` 声明一个变量，可选择是否赋值。
- `let` 声明一个块级作用域的局部变量，可选择是否赋值。
- `const` 声明一个块级作用域的只读命名常量。

变量是作为值的符号名，变量的名字又叫 `标识符`，是不以数字开头的包含 `字母，数字，_ 或 $` 的区分大小写的一串字符。

应该总是在声明变量后再使用，在一般情况下这会创建一个 `未声明的全局变量`，但在严格模式会报错。

```js
let x = 42
// let x 被称作声明，= 42 称作初始化器。
// let 和 var 声明时，初始化器可选，如果没有，变量会被赋值为 undefined。
// const 声明总需要初始化器，因为其禁止在声明后再次赋值，以及隐式转换为 undefined。
```

一个变量可能属于下列作用域之一：

- `全局作用域`：在脚本模式中运行的所有代码的默认作用域。
- `模块作用域`：在模块模式中运行的代码的作用域。
- `函数作用域`：由函数创建的作用域。
- `块级作用域`：用 `let` 或 `const` 声明的变量才拥有的，用一对花括号创建的作用域。

变量提升：

- 用 `var` 声明的变量会被提升到该变量的函数或全局作用域的顶部，但只有声明和默认初始化被提升，值赋值不会提升。
- 用 `let/const` 声明的变量存在一个 `从块的开始到声明所在的”暂时性死区“`，此时引用变量会抛出 `ReferenceError`。
- 函数声明会被全部提升，可在其作用域内随意调用。

全局变量：即全局对象的属性，在各个环境中可统一用 `globalThis` 来获取全局变量。

常量：由 `const` 创建的常量仅阻止重新赋值，而不阻止修改，被赋值为常量的对象的属性是不受保护的，数组同理。

## 数据结构和类型

最新 `ECMAScript` 标准定义了 8 种数据类型，7 种 `基本数据类型`：

- `Boolean`：`true` 和 `false`。
- `null`：一个表示空值的特殊关键字。
- `undefined`：一个未定义值的顶级属性。
- `Number`：整数或浮点数。
- `BigInt`：任意精度的整数。
- `String`：表示文本值的字符序列。
- `Symbol`：其实例是唯一且不可变的数据类型。

以及引用类型 `Object`。

JS 是一门 `动态类型` 语言，可在声明变量时不必指定类型。这也可在在脚本执行期间根据需要自动转换数据类型。

类型转换：

- `数字和 + 运算符`：使用 `+` 运算符的表达式中涉及数字和字符串，会把数字转换成字符串。
- `parseInt 和 parseFloat`：将字符串转换为数字，`parseInt` 还接受第二个参数，表示使用哪一种进制。
- `+ 一元运算符`：`+'1.1'`。

## 字面量

- 数组：由一对 `方括号 []` 括起来的包含零个或多个表达式的列表。
- 布尔：两种字面量值 `true` 和 `false`。
- 数字：包括多种基数的整数字面量和以 10 为基数的浮点数字面量。
- 对象：由一对 `花括号 {}` 括起来的包含零个或多个属性名和相关值的列表。
- RegExp：被 `正斜杠围成的字符` 的表达式。
- 字符串：由一对双引号 `"` 或单引号 `'` 括起来的零个或多个字符。

数组字面量中连续的两个逗号表示该元素为 `empty`，当使用下标访问时返回 `undefined`，使用数组方法遍历时会被跳过。

整数字面量包括 `十进制`、`八进制 0o`、`十六进制 0x`、`二进制 0b`，如果是 `BigInt` 类型需要在后面加个 `n`。

浮点数字面量语法为 `[digits].[digits][(E|e)[(+|-)]digits]`。

对象字面量的属性名可以是任意字符串，但如果是不和法的或数字，需用引号包裹，且不能用 `.` 访问而是 `[]`。

字符串字面量也可以使用 `模板字符串` 以及更深层次的 `带标签的模板`，遇到特殊字符时可以通过 `\` 转义。

# 控制流与错误

## 块语句

最基本的语句是用于组合语句的块语句，块语句由一对花括号界定。

## 条件语句

- `if...else if...else`
- `switch...case...break...default`

假值：除了 `undefined` `null` `false` `0` `NaN` `''` 这六个值被转为 `false` 外，其他值都视为 `true`。

## 异常处理语句

可以用 `throw` 语句抛出一个异常并且用 `try...catch...finally` 语句处理它。

```js
throw expression
// 可以抛出任意表达式
```

```js
try {
  statements
} catch (exception) {
  statements
} finally {
  statements
}
// 在 finally 块中返回一个值，会是整个 try catch 流程的返回值，甚至可以覆盖之前抛出的异常
```

JS 中定义的几种常见错误类型:

- Error：总的错误。
- SyntaxError: 解析代码时发生的语法错误。
- ReferenceError: 引用一个不存在的变量时发生的错误。
- RangeError: 一个值超出有效返回时发生的错误。
- TypeError: 变量或参数不是预期类型时发生的错误。
- URIError: URI 相关函数的参数不正确时抛出的错误。
- EvalError: 函数没有被正确执行时的错误。

这些都是构造函数, 可用同 `new Error()` 一样去使用它们，常见属性有 `name` `message` `stack`。

# 循环与迭代

## for 语句

```js
for ([initialExpression]; [condition]; [incrementExpression]) {
  statement
}
```

## do...while 语句

```js
do {
  statement
} while (condition)
```

## while 语句

```js
while (condition) {
  statement
}
```
